<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<form id="dream_search_widget">
	<label for="symbol">Symbol</label>
	<input type="text" id="symbol">
	<span id="autocomplete"></span>
	<input type="submit" id="submit" value="Search">
</form>
<script>
	window.dreamCache = [];
	window.urlPrefix = '{{ site.url }}/dict/';
	jQuery(document).ready(function($) {
		$('#dream_search_widget').submit(function(event) {
			return false;
		});
		$('#symbol').keydown(function(event) {
			let val = $(this).val().toLowerCase();
			if (val.length > 0) {
				let ch = val.substr(0, 1);
				if (ch.match(/^[a-z]$/)) {
					if (!window.dreamCache[ch]) {
						let res = $.ajax(window.urlPrefix+ch+'.json');
						console.log(res.responseJSON);
						window.dreamCache[ch] = res.responseJSON;
					}
					if (val.length > 1) {
						let items = window.dreamCache[ch];
						let output = [];
						for (i in items) {
							console.log(items[i]);
							break;
						}
						updateAutoComplete('test');
					}
				}
			}
		});
	});
	window.updateAutoComplete = function(str) {
		$('#autocomplete').html(str);
	}
</script>